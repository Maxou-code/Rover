#include <pgmspace.h>

#include "globals.hpp"

const char page[] PROGMEM = R"rawliteral(
<!DOCTYPE html><html lang="fr"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><title>Rover</title><style>*{font-family:Arial,sans-serif;margin:0;padding:0;box-sizing:border-box}body{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;min-height:100vh;background:#2f2f2f;color:#fff;padding:20px;gap:20px}h1{margin-bottom:20px}section{display:flex;flex-wrap:wrap;gap:20px;justify-content:center;width:100%}.card{background:rgba(0,0,0,.3);border-radius:10px;padding:15px;display:flex;flex-direction:column;align-items:center;gap:10px;min-width:280px}.card fieldset{border:1px solid #555;border-radius:8px;margin-bottom:15px;padding:10px 15px;width:100%}.card legend{padding:0 10px;font-weight:700}.image{flex:1}.video{width:100%;max-width:750px;border-radius:8px;transform:rotate(180deg)}.button-row{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}button{border:none;border-radius:8px;cursor:pointer;font-weight:700;transition:transform .1s ease-in-out}button:active{transform:scale(.9)}.mode{background-color:orange;width:40px;height:40px}.blue{background-color:#09f;width:75px;height:70px}.red{background-color:#fb4040;width:75px;height:70px}.orange{background-color:orange;width:40px;height:40px}.yellow{background-color:#ff0;width:100px;height:40px}.button-cam{background-color:orange;width:100px;height:40px}.speed-control{display:flex;align-items:center;gap:10px;justify-content:center}.no-select{user-select:none;-webkit-user-select:none;-ms-user-select:none}</style><script>let speedVal=0;function getsend(e){fetch(e+"?"+(new Date).getTime())}function updateData(){fetch("/data").then(e=>e.json()).then(e=>{lat.textContent=e.Lat,lon.textContent=e.Lon,temp.textContent=e.Temp,hum.textContent=e.Hum,lum.textContent=e.LumMoy,dist_front.textContent=e.DistFront,dist_back.textContent=e.DistBack,dist_right.textContent=e.DistRight,dist_left.textContent=e.DistLeft,mod_move.textContent=e.ModMove,speed.textContent=e.Speed,speedVal=e.Speed})}setInterval(updateData,100);const keys=new Set;document.addEventListener("keydown",e=>{if(!e.repeat)switch(keys.add(e.key),e.key){case"ArrowUp":getsend("go");break;case"ArrowDown":getsend("back");break;case"ArrowLeft":getsend("left");break;case"ArrowRight":getsend("right");break;case" ":getsend("stop");break;case"s":case"S":speedVal<100?(getsend("up_speed"),keys.has("ArrowUp")&&getsend("go")):keys.has("ArrowUp")&&(getsend("up_speed"),getsend("go"));break;case"q":case"Q":speedVal>50&&getsend("down_speed"),keys.has("ArrowUp")&&getsend("go");break;case"l":case"L":getsend("ledon");break;case"m":case"M":getsend("ledoff");break;case"f":case"F":getsend("cam_left");break;case"g":case"G":getsend("cam_center");break;case"h":case"H":getsend("cam_right");break;case"à":case"0":getsend("mod_0");break;case"&":case"1":getsend("mod_1")}}),document.addEventListener("keyup",e=>{keys.delete(e.key),["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)&&getsend("stop")})</script><h1>Rover</h1><section><div class="card no-select"><fieldset><legend>Capteurs</legend><h3>Latitude : <span id="lat">NC</span></h3><h3>Longitude : <span id="lon">NC</span></h3><h3>Température : <span id="temp">0</span>°C</h3><h3>Humidité : <span id="hum">0</span>%</h3><h3>Luminosité : <span id="lum">0</span></h3><h3>Distance avant : <span id="dist_front">0</span></h3><h3>Distance arrière : <span id="dist_back">0</span></h3><h3>Distance droite : <span id="dist_right">0</span></h3><h3>Distance gauche : <span id="dist_left">0</span></h3></fieldset><fieldset><legend>Mode de déplacement</legend><h3>Mode : <span id="mod_move">0</span></h3><div class="button-row"><button class="mode" onmousedown='getsend("mod_0")'>0</button> <button class="mode" onmousedown='getsend("mod_1")'>1</button></div></fieldset></div><div class="card image no-select"><img src="http://192.168.4.1:81/stream" class="video"><div class="button-row"><button class="button-cam" onmousedown='getsend("cam_left")'>Gauche</button> <button class="button-cam" onmousedown='getsend("cam_center")'>Centre</button> <button class="button-cam" onmousedown='getsend("cam_right")'>Droite</button></div></div><div class="card controls no-select"><div class="button-row"><button class="blue" onmousedown='getsend("go")' onmouseup='getsend("stop")'>Avancer</button></div><div class="button-row"><button class="blue" onmousedown='getsend("left")' onmouseup='getsend("stop")'>Gauche</button> <button class="red" onmousedown='getsend("stop")'>Stop</button> <button class="blue" onmousedown='getsend("right")' onmouseup='getsend("stop")'>Droite</button></div><div class="button-row"><button class="blue" onmousedown='getsend("back")' onmouseup='getsend("stop")'>Reculer</button></div><div class="speed-control"><h3>Vitesse : <span id="speed">0</span></h3><div class="button-row"><button class="orange" onmousedown='getsend("down_speed")'>-</button> <button class="orange" onmousedown='getsend("up_speed")'>+</button></div></div><div class="button-row"><button class="yellow" onmousedown='getsend("ledon")'>Lumière ON</button> <button class="yellow" onmousedown='getsend("ledoff")'>Lumière OFF</button></div></div></section>
)rawliteral";
